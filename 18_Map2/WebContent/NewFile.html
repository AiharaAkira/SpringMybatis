<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<script type="text/javascript" src="jQuery.js"></script>
<script type="text/javascript"
	src="//dapi.kakao.com/v2/maps/sdk.js?appkey=60d3d5b568586bcc670fec01a1366483"></script>
<script type="text/javascript">
	$(function() {
		var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
		var options = { //지도를 생성할 때 필요한 기본 옵션
			center : new kakao.maps.LatLng(37.556567, 126.943366), //지도의 중심좌표.
			level : 3
		//지도의 레벨(확대, 축소 정도)
		};

		var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴

		var roadviewContainer = document.getElementById('roadview'); //로드뷰를 표시할 div
		var roadview = new kakao.maps.Roadview(roadviewContainer); //로드뷰 객체
		var roadviewClient = new kakao.maps.RoadviewClient(); //좌표로부터 로드뷰 파노ID를 가져올 로드뷰 helper객체

		var position = new kakao.maps.LatLng(37.556567, 126.943366);

		// 특정 위치의 좌표와 가까운 로드뷰의 panoId를 추출하여 로드뷰를 띄운다.
		roadviewClient.getNearestPanoId(position, 50, function(panoId) {
			roadview.setPanoId(panoId, position); //panoId와 중심좌표를 통해 로드뷰 실행
		});

		//https://dapi.kakao.com/v2/local/search/keyword.json?

				
		$("#search").keyup(function(e) {
			if(e.keyCode == 13){
				let search = $(this).val();
				
				$.ajax({
					url : "https://dapi.kakao.com/v2/local/search/keyword.json",
					data : {
						query : search,
						x : 37.556567,
						y : 126.943366,
						radius : 5000
					},
					beforeSend : function(req) {
						req.setRequestHeader("Authorization",
								"KakaoAK 0172b72d9317e5bbb5d67b16667edd8a");
					},
					success : function(result) {
						console.log(result);
						console.log(JSON.stringify(result));
					
						// 마커가 표시될 위치입니다 
						var markerPosition  = new kakao.maps.LatLng(33.450701, 126.570667); 

						// 마커를 생성합니다
						var marker = new kakao.maps.Marker({
						    position: markerPosition
						});
						
						// 마커가 지도 위에 표시되도록 설정합니다
						marker.setMap(map);
						
						// 아래 코드는 지도 위의 마커를 제거하는 코드입니다
						// marker.setMap(null);    

						
						
					}
					
				});
				
				
			}
		});		
				

	});
</script>
</head>
<body>
	<input id="search" placeholder="검색!!">
	<hr>
	<div id="map" style="width: 500px; height: 400px;"></div>
	<div id="roadview" style="width: 100%; height: 300px"></div>
</body>
</html>